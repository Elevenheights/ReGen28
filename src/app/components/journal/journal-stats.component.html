<!-- Stats Content - no outer container when useGlassStyles is false (parent provides container) -->
<ng-container *ngIf="!useGlassStyles">
	<!-- Loading state -->
	<div *ngIf="isLoading" class="grid grid-cols-3 gap-4">
		<div class="text-center">
			<div class="w-10 h-6 bg-neutral-200 rounded animate-pulse mx-auto mb-1"></div>
			<p class="text-xs text-neutral-500 font-medium">Total entries</p>
		</div>
		<div class="text-center">
			<div class="w-10 h-6 bg-neutral-200 rounded animate-pulse mx-auto mb-1"></div>
			<p class="text-xs text-neutral-500 font-medium">This week</p>
		</div>
		<div class="text-center">
			<div class="w-10 h-6 bg-neutral-200 rounded animate-pulse mx-auto mb-1"></div>
			<p class="text-xs text-neutral-500 font-medium">Day streak</p>
		</div>
	</div>

	<!-- Loaded state -->
	<div *ngIf="!isLoading && stats">
		<!-- Basic Stats -->
		<div class="grid grid-cols-3 gap-4 mb-6">
			<div class="card-elevated p-4 text-center">
				<p class="text-2xl text-neutral-900 font-black tracking-tight" [appCountUp]="stats.totalEntries"></p>
				<p class="text-[10px] text-neutral-400 font-bold uppercase tracking-widest mt-1">Total</p>
			</div>
			<div class="card-elevated p-4 text-center">
				<p class="text-2xl text-neutral-900 font-black tracking-tight" [appCountUp]="stats.weeklyCount"></p>
				<p class="text-[10px] text-neutral-400 font-bold uppercase tracking-widest mt-1">Week</p>
			</div>
			<div class="card-elevated p-4 text-center flex flex-col items-center justify-center">
				<div class="flex items-center space-x-1">
					<p class="text-2xl font-black tracking-tight" [ngClass]="getStreakColor()"
						[appCountUp]="stats.currentStreak"></p>
					<i class="fa-solid text-base" [ngClass]="[getStreakIcon(), getStreakColor()]"></i>
				</div>
				<p class="text-[10px] text-neutral-400 font-bold uppercase tracking-widest mt-1">Streak</p>
			</div>
		</div>

		<!-- Mood Overview -->
		<div *ngIf="stats.averageMood > 0" class="bg-gradient-to-r from-purple-50 to-indigo-50 rounded-2xl p-4">
			<div class="flex items-center justify-between">
				<div class="flex items-center space-x-3">
					<span class="text-2xl">{{ getAverageMoodEmoji() }}</span>
					<div>
						<p class="text-sm text-neutral-900 font-semibold">Average Mood</p>
						<p class="text-xs text-neutral-500 font-medium">{{ formatAverageMood() }}/10</p>
					</div>
				</div>
				<div class="flex items-center space-x-2 bg-white/60 px-3 py-1.5 rounded-xl">
					<i class="fa-solid text-sm" [ngClass]="[getMoodTrendIcon(), getMoodTrendColor()]"></i>
					<span class="text-xs font-semibold" [ngClass]="getMoodTrendColor()">{{ getMoodTrendText() }}</span>
				</div>
			</div>
		</div>

		<!-- Detailed Stats (when expanded) -->
		<div *ngIf="showDetailedStats" class="space-y-4 mt-4 pt-4 border-t border-neutral-100">
			<!-- Writing Frequency -->
			<div class="flex items-center justify-between py-2">
				<div class="flex items-center space-x-3">
					<i class="fa-solid fa-pen text-neutral-500"></i>
					<span class="text-sm text-neutral-700 font-medium">Writing Frequency</span>
				</div>
				<span class="text-sm text-neutral-600 font-semibold">{{ getWritingFrequency() }}</span>
			</div>

			<!-- Longest Streak -->
			<div class="flex items-center justify-between py-2">
				<div class="flex items-center space-x-3">
					<i class="fa-solid fa-trophy text-neutral-500"></i>
					<span class="text-sm text-neutral-700 font-medium">Longest Streak</span>
				</div>
				<span class="text-sm text-neutral-600 font-semibold">{{ stats.longestStreak }} days</span>
			</div>

			<!-- Monthly Count -->
			<div class="flex items-center justify-between py-2">
				<div class="flex items-center space-x-3">
					<i class="fa-solid fa-calendar text-neutral-500"></i>
					<span class="text-sm text-neutral-700 font-medium">This Month</span>
				</div>
				<span class="text-sm text-neutral-600 font-semibold">{{ stats.monthlyCount }} entries</span>
			</div>

			<!-- Word Counts -->
			<div class="flex items-center justify-between py-2">
				<div class="flex items-center space-x-3">
					<i class="fa-solid fa-file-lines text-neutral-500"></i>
					<span class="text-sm text-neutral-700 font-medium">Total Words</span>
				</div>
				<span class="text-sm text-neutral-600 font-semibold">{{ stats.totalWords | number }}</span>
			</div>

			<div class="flex items-center justify-between py-2">
				<div class="flex items-center space-x-3">
					<i class="fa-solid fa-quote-left text-neutral-500"></i>
					<span class="text-sm text-neutral-700 font-medium">Avg. Length</span>
				</div>
				<span class="text-sm text-neutral-600 font-semibold">{{ stats.averageWordsPerEntry }} words</span>
			</div>

			<!-- Sentiment Trend -->
			<div class="flex items-center justify-between py-2">
				<div class="flex items-center space-x-3">
					<i class="fa-solid fa-brain text-neutral-500"></i>
					<span class="text-sm text-neutral-700 font-medium">Sentiment</span>
				</div>
				<div class="flex items-center space-x-2">
					<i class="fa-solid text-sm" [ngClass]="[getSentimentIcon(), getSentimentColor()]"></i>
					<span class="text-sm font-semibold" [ngClass]="getSentimentColor()">{{ getSentimentTrendText()
						}}</span>
				</div>
			</div>

			<!-- Top Tags -->
			<div *ngIf="stats.mostUsedTags && stats.mostUsedTags.length > 0" class="pt-2">
				<p class="text-sm text-neutral-700 font-medium mb-2">Top Tags</p>
				<div class="flex flex-wrap gap-2">
					<span *ngFor="let tag of stats.mostUsedTags.slice(0, 5)"
						class="px-3 py-1 bg-purple-100 text-purple-700 text-xs font-semibold rounded-full">
						{{ tag }}
					</span>
				</div>
			</div>

			<!-- Favorite Categories -->
			<div *ngIf="stats.favoriteCategories && stats.favoriteCategories.length > 0" class="pt-2">
				<p class="text-sm text-neutral-700 font-medium mb-2">Favorite Topics</p>
				<div class="flex flex-wrap gap-2">
					<span *ngFor="let category of stats.favoriteCategories.slice(0, 3)"
						class="px-3 py-1 bg-indigo-100 text-indigo-700 text-xs font-semibold rounded-full capitalize">
						{{ category.replace('_', ' ') }}
					</span>
				</div>
			</div>
		</div>
	</div>

	<!-- No data state -->
	<div *ngIf="!isLoading && !stats" class="text-center py-6">
		<i class="fa-solid fa-chart-line text-neutral-300 text-3xl mb-3"></i>
		<p class="text-sm text-neutral-500 font-medium">No journal data available</p>
	</div>
</ng-container>

<!-- Glass style for gradient backgrounds -->
<ng-container *ngIf="useGlassStyles">
	<!-- Loading state -->
	<div *ngIf="isLoading" class="grid grid-cols-3 gap-4">
		<div class="text-center">
			<div class="w-8 h-6 bg-white/30 rounded animate-pulse mx-auto mb-1"></div>
			<p class="text-xs text-white/70">Total</p>
		</div>
		<div class="text-center">
			<div class="w-8 h-6 bg-white/30 rounded animate-pulse mx-auto mb-1"></div>
			<p class="text-xs text-white/70">Week</p>
		</div>
		<div class="text-center">
			<div class="w-8 h-6 bg-white/30 rounded animate-pulse mx-auto mb-1"></div>
			<p class="text-xs text-white/70">Streak</p>
		</div>
	</div>

	<!-- Loaded state -->
	<div *ngIf="!isLoading && stats" class="grid grid-cols-3 gap-3">
		<div class="text-center">
			<p class="text-2xl text-white font-black tracking-tight" [appCountUp]="stats.totalEntries"></p>
			<p class="text-[10px] text-white/50 font-bold uppercase tracking-widest">Total</p>
		</div>
		<div class="text-center">
			<p class="text-2xl text-white font-black tracking-tight" [appCountUp]="stats.weeklyCount"></p>
			<p class="text-[10px] text-white/50 font-bold uppercase tracking-widest">Week</p>
		</div>
		<div class="text-center">
			<div class="flex items-center justify-center space-x-1">
				<p class="text-2xl text-white font-black tracking-tight" [appCountUp]="stats.currentStreak"></p>
				<i class="fa-solid fa-fire text-amber-300"></i>
			</div>
			<p class="text-[10px] text-white/50 font-bold uppercase tracking-widest">Streak</p>
		</div>
	</div>

	<!-- No data state -->
	<div *ngIf="!isLoading && !stats" class="text-center py-2">
		<p class="text-sm text-white/70">No data yet</p>
	</div>
</ng-container>