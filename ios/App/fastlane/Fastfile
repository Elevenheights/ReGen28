default_platform(:ios)

platform :ios do
  desc "Build for Appflow"
  lane :build_capacitor do
    # Xcode 15+ SPM signing workaround
    # Don't pass CODE_SIGN_IDENTITY to avoid conflicts with SPM automatic signing
    # Only pass DEVELOPMENT_TEAM which is needed for all targets
    gym(
      scheme: "App",
      export_method: "development",
      xcargs: "DEVELOPMENT_TEAM=3GNC95S8K6",
      codesigning_identity: ""  # Empty string prevents Appflow from passing CODE_SIGN_IDENTITY
    )
  end
end
